<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LotteryPro AI</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0a0f;--bg2:#12121a;--bg3:#1a1a2e;--s1:#ffffff06;--s2:#ffffff10;--s3:#ffffff18;--t1:#f0f0f5;--t2:#a0a0b8;--t3:#606078;--ac:#6c5ce7;--ac2:#a29bfe;--ac3:#00cec9;--gold:#fdcb6e;--green:#00b894;--red:#ff6b6b;--grad:linear-gradient(135deg,#6c5ce7,#a29bfe,#00cec9);--r:16px;--r2:10px;--r3:24px}
html{scroll-behavior:smooth}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--t1);overflow-x:hidden;min-height:100vh}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse at 20% 20%,rgba(108,92,231,.08),transparent 50%),radial-gradient(ellipse at 80% 80%,rgba(0,206,201,.06),transparent 50%);pointer-events:none;z-index:0}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes ballPop{0%{transform:scale(0);opacity:0}60%{transform:scale(1.15)}100%{transform:scale(1);opacity:1}}
.fu{animation:fadeUp .5s ease both}
.container{max-width:1100px;margin:0 auto;padding:0 20px;position:relative;z-index:1}
section{padding:50px 0}

/* Nav */
nav{position:fixed;top:0;left:0;right:0;z-index:100;padding:14px 0;backdrop-filter:blur(20px);background:rgba(10,10,15,.75);border-bottom:1px solid var(--s2)}
nav .container{display:flex;justify-content:space-between;align-items:center}
.logo{font-weight:800;font-size:1.3rem;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-r{display:flex;gap:16px;align-items:center}
.nav-r a{color:var(--t2);text-decoration:none;font-size:.85rem;font-weight:500;transition:.2s}
.nav-r a:hover{color:var(--t1)}
.lang-btn{padding:4px 10px;border-radius:6px;border:1px solid var(--s3);background:transparent;color:var(--t2);cursor:pointer;font-size:.8rem;font-family:inherit;transition:.2s}
.lang-btn:hover,.lang-btn.active{background:var(--ac);color:#fff;border-color:var(--ac)}

/* Hero */
.hero{padding:120px 0 60px;text-align:center}
.hero h1{font-size:clamp(2rem,5vw,3.4rem);font-weight:900;line-height:1.1;margin-bottom:12px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{font-size:1.05rem;color:var(--t2);max-width:560px;margin:0 auto 24px;line-height:1.6}
.badge{display:inline-flex;align-items:center;gap:8px;padding:5px 14px;background:var(--s2);border:1px solid var(--s3);border-radius:99px;font-size:.8rem;color:var(--ac2);margin-bottom:20px}
.badge .dot{width:7px;height:7px;background:var(--green);border-radius:50%;animation:pulse 2s infinite}

/* Card */
.card{background:var(--s1);backdrop-filter:blur(16px);border:1px solid var(--s2);border-radius:var(--r3);padding:28px;box-shadow:0 8px 32px rgba(0,0,0,.3)}
.card h2{font-size:1.2rem;font-weight:700;margin-bottom:16px}

/* Lottery & Algo select */
.select-row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:14px}
.chip{padding:7px 14px;border-radius:var(--r2);border:1px solid var(--s3);background:var(--s1);color:var(--t2);cursor:pointer;font-size:.82rem;font-weight:500;transition:.2s;font-family:inherit}
.chip:hover,.chip.on{background:var(--ac);color:#fff;border-color:var(--ac)}
.chip.gold.on{background:linear-gradient(135deg,#fdcb6e,#e17055);border-color:#fdcb6e}
.section-label{font-size:.8rem;color:var(--t3);margin-bottom:6px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}

/* Generate btn */
.gen-btn{display:block;width:100%;padding:15px;border:none;border-radius:var(--r);background:var(--grad);color:#fff;font-size:1.05rem;font-weight:700;cursor:pointer;font-family:inherit;transition:.2s;letter-spacing:.3px;margin-top:16px}
.gen-btn:hover{transform:translateY(-2px);box-shadow:0 10px 36px rgba(108,92,231,.35)}
.gen-btn:active{transform:scale(.98)}
.gen-btn:disabled{opacity:.5;cursor:wait}
.gen-btn .sp{display:inline-block;width:18px;height:18px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .7s linear infinite;vertical-align:middle;margin-right:8px}

/* Results */
#results{margin-top:20px}
.ri{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:14px;font-size:.82rem;color:var(--t3)}
.ri span{background:var(--s1);padding:3px 10px;border-radius:99px}
.ticket{background:var(--bg2);border:1px solid var(--s2);border-radius:var(--r);padding:18px;margin-bottom:10px;transition:.2s}
.ticket:hover{border-color:var(--ac);transform:translateX(3px)}
.th{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.tn{font-size:.78rem;color:var(--ac2);font-weight:600}
.ta{font-size:.72rem;color:var(--t3);background:var(--s1);padding:2px 8px;border-radius:99px}
.balls{display:flex;gap:7px;flex-wrap:wrap;align-items:center}
.b{width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1rem;font-family:'JetBrains Mono',monospace;background:linear-gradient(135deg,#6c5ce7,#a29bfe);color:#fff;box-shadow:0 3px 10px rgba(108,92,231,.3);animation:ballPop .35s ease both}
.b:nth-child(2){animation-delay:.04s}.b:nth-child(3){animation-delay:.08s}.b:nth-child(4){animation-delay:.12s}.b:nth-child(5){animation-delay:.16s}
.b.e{background:linear-gradient(135deg,#fdcb6e,#e17055);box-shadow:0 3px 10px rgba(253,203,110,.3)}
.bsep{color:var(--t3);font-size:1.1rem;margin:0 3px}
.conf{display:flex;align-items:center;gap:5px;margin-top:8px;font-size:.78rem;color:var(--t3)}
.cbar{flex:1;max-width:100px;height:4px;background:var(--s2);border-radius:99px;overflow:hidden}
.cfill{height:100%;border-radius:99px;background:var(--grad);transition:width .8s ease}
.top-box{margin-top:16px;padding:14px;background:var(--s1);border-radius:var(--r2)}
.top-box h4{font-size:.82rem;color:var(--t2);margin-bottom:8px}
.tnr{display:flex;gap:5px;flex-wrap:wrap}
.tni{padding:3px 9px;border-radius:99px;font-size:.78rem;font-weight:600;font-family:'JetBrains Mono',monospace;background:var(--s2);color:var(--ac2)}

/* Stats */
.sg{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin-top:20px}
.sc{background:var(--s1);backdrop-filter:blur(8px);border:1px solid var(--s2);border-radius:var(--r);padding:18px;text-align:center}
.sv{font-size:1.8rem;font-weight:800;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.sl{font-size:.82rem;color:var(--t3);margin-top:3px}

/* Donate */
.donate{background:var(--bg2);border-top:1px solid var(--s2);border-bottom:1px solid var(--s2)}
.donate h2{text-align:center;font-size:1.8rem;font-weight:800;margin-bottom:6px}
.donate .sub{text-align:center;color:var(--t2);font-size:.95rem;margin-bottom:32px;max-width:480px;margin-left:auto;margin-right:auto;line-height:1.6}
.dg{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:28px}
.dc{background:var(--s1);backdrop-filter:blur(16px);border:1px solid var(--s2);border-radius:var(--r3);padding:24px;text-align:center;transition:.3s}
.dc:hover{border-color:var(--ac);transform:translateY(-3px);box-shadow:0 14px 40px rgba(108,92,231,.15)}
.dc h3{font-size:1.1rem;margin-bottom:3px}
.dc .tag{display:inline-block;font-size:.72rem;color:var(--ac2);background:var(--s1);padding:2px 8px;border-radius:99px;margin-bottom:14px}
.dc img{width:180px;height:180px;object-fit:contain;border-radius:var(--r);margin-bottom:14px;background:#fff;padding:6px}
.dl{display:inline-block;margin-bottom:10px;padding:9px 24px;background:var(--grad);color:#fff;text-decoration:none;border-radius:99px;font-weight:600;font-size:.9rem;transition:.2s}
.dl:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(108,92,231,.35)}
.addr{font-family:'JetBrains Mono',monospace;font-size:.68rem;color:var(--t3);background:var(--s1);padding:7px 10px;border-radius:var(--r2);word-break:break-all;cursor:pointer;transition:.2s;border:1px solid transparent}
.addr:hover{border-color:var(--ac);color:var(--t1)}
.disc{background:var(--s1);border:1px solid rgba(255,107,107,.15);border-radius:var(--r);padding:18px;margin-top:28px;text-align:center}
.disc h4{color:var(--red);font-size:.85rem;margin-bottom:6px}
.disc p{font-size:.82rem;color:var(--t3);line-height:1.6}

/* Toast */
.toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%) translateY(80px);background:var(--green);color:#fff;padding:10px 22px;border-radius:var(--r);font-weight:600;font-size:.9rem;transition:.3s;opacity:0;z-index:999}
.toast.show{transform:translateX(-50%) translateY(0);opacity:1}

/* Footer */
footer{padding:32px 0;text-align:center;color:var(--t3);font-size:.82rem;border-top:1px solid var(--s2)}
footer a{color:var(--ac2);text-decoration:none}

@media(max-width:600px){
  .hero h1{font-size:1.8rem}
  .card{padding:18px}
  .b{width:38px;height:38px;font-size:.9rem}
  .dg{grid-template-columns:1fr}
  .dc img{width:150px;height:150px}
  section{padding:36px 0}
  .nav-r a{display:none}
}
</style>
</head>
<body>

<nav>
<div class="container">
  <div class="logo">LotteryPro AI</div>
  <div class="nav-r">
    <a href="#generator" data-i="nav_gen">Generator</a>
    <a href="#donate" data-i="nav_support">Tamogatas</a>
    <a href="https://github.com/Whem/lotteryGuesser" target="_blank">GitHub</a>
    <button class="lang-btn active" id="btnHu">HU</button>
    <button class="lang-btn" id="btnEn">EN</button>
  </div>
</div>
</nav>

<section class="hero">
<div class="container">
  <div class="badge fu"><span class="dot"></span> <span data-i="badge">Elo szerveren fut</span></div>
  <h1 class="fu" data-i="hero_title">Intelligens Lottoszam Generator</h1>
  <p class="fu" data-i="hero_desc">30+ algoritmus elemzi a historikus huzasokat statisztikai, neuralis es kvantum-inspiralt modszerekkel.</p>
</div>
</section>

<section id="generator">
<div class="container">
  <div class="card fu">
    <h2 data-i="gen_title">Szam Generalas</h2>

    <div class="section-label" data-i="label_lottery">Lotto tipusa</div>
    <div class="select-row" id="lotterySelect"></div>

    <div class="section-label" data-i="label_algo">Algoritmus</div>
    <div class="select-row" id="algoSelect"></div>

    <div class="section-label" data-i="label_tickets">Szelvenyek szama</div>
    <div class="select-row" id="ticketCount">
      <button class="chip" data-count="1">1</button>
      <button class="chip on" data-count="4">4</button>
      <button class="chip" data-count="8">8</button>
    </div>

    <button class="gen-btn" id="genBtn" data-i="gen_btn">Generalj szelvenyeket</button>

    <div id="results"></div>
  </div>

  <div class="sg" id="statsGrid"></div>
</div>
</section>

<section class="donate" id="donate">
<div class="container">
  <h2 class="fu" data-i="donate_title">Tamogasd a Projektet</h2>
  <p class="sub fu" data-i="donate_desc">Ha tetszik az alkalmazas, tamogasd a fejlesztest! Minden forint segit a szerver fenntartasaban es az uj algoritmusok fejleszteseben.</p>

  <div class="dg">
    <div class="dc fu">
      <h3>Revolut</h3>
      <div class="tag" data-i="tag_instant">Azonnali atutalas</div><br>
      <a href="https://revolut.me/szabolt19q" target="_blank" rel="noopener">
        <img src="images/revolut-qr.jpg" alt="Revolut QR">
      </a><br>
      <a href="https://revolut.me/szabolt19q" target="_blank" rel="noopener" class="dl" data-i="revolut_btn">Kuldes Revolut-on</a>
      <div class="addr" id="copyRev">@szabolt19q</div>
    </div>

    <div class="dc fu">
      <h3>Bitcoin</h3>
      <div class="tag" data-i="tag_crypto">Kriptovaluta</div><br>
      <img src="images/bitcoin-qr.jpg" alt="Bitcoin QR" style="background:#fff;padding:8px">
      <br>
      <div class="addr" id="copyBtc">bc1qeycda4kdd8kupgh9mrxxgardkrkjh82wpurh8c</div>
    </div>
  </div>

  <div class="disc">
    <h4 data-i="disc_title">Fontos figyelmeztet√©s</h4>
    <p data-i="disc_text">A lotto huzasok teljesen veletlen szeruek. Ez az alkalmazas statisztikai elemzesre epul es NEM garantal nyeremenyt. Az algoritmusok csak logik√°t √©s mintakat keresnek a historikus adatokban. Felelossegteljesen jatssz!</p>
  </div>
</div>
</section>

<footer>
  <div class="container">
    <p>LotteryPro AI &copy; 2025 &mdash; <a href="https://github.com/Whem/lotteryGuesser" target="_blank">GitHub</a></p>
  </div>
</footer>

<div class="toast" id="toast"></div>

<script>
// === I18N ===
const T = {
  hu: {
    badge: '√âles szerveren fut',
    hero_title: 'Intelligens<br>Lott√≥sz√°m Gener√°tor',
    hero_desc: '30+ algoritmus elemzi a historikus h√∫z√°sokat statisztikai, neur√°lis √©s kvantum-inspir√°lt m√≥dszerekkel. V√°lassz lott√≥t, algoritmust √©s gener√°lj!',
    gen_title: 'Sz√°m Gener√°l√°s',
    label_lottery: 'Lott√≥ t√≠pusa',
    label_algo: 'Algoritmus',
    label_tickets: 'Szelv√©nyek sz√°ma',
    gen_btn: 'Gener√°lj szelv√©nyeket!',
    nav_gen: 'Gener√°tor',
    nav_support: 'T√°mogat√°s',
    donate_title: 'T√°mogasd a Projektet',
    donate_desc: 'Ha tetszik az alkalmaz√°s, t√°mogasd a fejleszt√©st! Minden forint seg√≠t a szerver fenntart√°s√°ban √©s az √∫j algoritmusok fejleszt√©s√©ben.',
    tag_instant: 'Azonnali √°tutal√°s',
    tag_crypto: 'Kriptovaluta',
    revolut_btn: 'K√ºld√©s Revolut-on',
    disc_title: '‚ö†Ô∏è Fontos figyelmeztet√©s',
    disc_text: 'A lott√≥ h√∫z√°sok teljesen v√©letlenszer≈±ek. Ez az alkalmaz√°s statisztikai elemz√©sre √©p√ºl √©s NEM garant√°l nyerem√©nyt. Az algoritmusok csak logik√°t √©s mint√°kat keresnek a historikus adatokban. Felel≈ëss√©gteljesen j√°tssz, √©s csak annyit k√∂lts amennyit megengedhetsz magadnak!',
    copied: 'V√°g√≥lapra m√°solva!',
    generating: 'Gener√°l√°s...',
    draws_analyzed: 'h√∫z√°s elemezve',
    last_draw: 'Utols√≥',
    ticket_lbl: 'Szelv√©ny',
    top_numbers: 'üî• Top sz√°mok',
    stat_draws: 'Elemzett h√∫z√°s',
    stat_numbers: 'Sz√°mok',
    stat_algos: 'Algoritmus',
    stat_weekly: 'H√∫z√°s/h√©t',
    auto_algo: 'ü§ñ Automatikus (legjobb)',
  },
  en: {
    badge: 'Live on server',
    hero_title: 'Intelligent<br>Lottery Number Generator',
    hero_desc: '30+ algorithms analyze historical draws using statistical, neural, and quantum-inspired methods. Pick a lottery, algorithm, and generate!',
    gen_title: 'Number Generation',
    label_lottery: 'Lottery type',
    label_algo: 'Algorithm',
    label_tickets: 'Number of tickets',
    gen_btn: 'Generate tickets!',
    nav_gen: 'Generator',
    nav_support: 'Support',
    donate_title: 'Support the Project',
    donate_desc: 'If you like the app, support the development! Every donation helps keep the server running and developing new algorithms.',
    tag_instant: 'Instant transfer',
    tag_crypto: 'Cryptocurrency',
    revolut_btn: 'Send via Revolut',
    disc_title: '‚ö†Ô∏è Important disclaimer',
    disc_text: 'Lottery draws are completely random. This application is based on statistical analysis and does NOT guarantee winnings. The algorithms only look for logic and patterns in historical data. Play responsibly, only spend what you can afford!',
    copied: 'Copied to clipboard!',
    generating: 'Generating...',
    draws_analyzed: 'draws analyzed',
    last_draw: 'Last',
    ticket_lbl: 'Ticket',
    top_numbers: 'üî• Top numbers',
    stat_draws: 'Draws analyzed',
    stat_numbers: 'Numbers',
    stat_algos: 'Algorithms',
    stat_weekly: 'Draws/week',
    auto_algo: 'ü§ñ Automatic (best)',
  }
};
let lang = 'hu';

function setLang(l) {
  lang = l;
  document.getElementById('btnHu').className = 'lang-btn' + (l==='hu' ? ' active' : '');
  document.getElementById('btnEn').className = 'lang-btn' + (l==='en' ? ' active' : '');
  document.querySelectorAll('[data-i]').forEach(el => {
    const key = el.getAttribute('data-i');
    if (T[l][key]) el.innerHTML = T[l][key];
  });
  if (lotteries.length) renderAlgoButtons();
  loadStats();
}

// === STATE ===
let selectedLottery = 'eurojackpot';
let selectedAlgo = 'auto';
let ticketCount = 4;
let lotteries = [];

// === API ===
const API = window.location.origin + '/api/admin';

async function init() {
  try {
    const r = await fetch(API + '/lottery-types');
    const d = await r.json();
    lotteries = d.data.filter(function(l){ return !l.isInternational && l.key !== 'keno'; });
    renderLotteryButtons();
    renderAlgoButtons();
    loadStats();
  } catch(e) {
    console.error('Init error:', e);
  }
}

function renderLotteryButtons() {
  var html = '';
  for (var i = 0; i < lotteries.length; i++) {
    var l = lotteries[i];
    var cls = l.key === selectedLottery ? 'chip on' : 'chip';
    html += '<button class="' + cls + '" data-lot="' + l.key + '">' + l.emoji + ' ' + l.displayName + '</button>';
  }
  document.getElementById('lotterySelect').innerHTML = html;
}

function renderAlgoButtons() {
  var algos = [
    { id: 'auto', name: T[lang].auto_algo },
    { id: 'SuperEnsemble', name: 'üß† Super Ensemble' },
    { id: 'Ensemble', name: 'üó≥Ô∏è Ensemble Voting' },
    { id: 'NeuralPattern', name: 'üîÆ Neural Pattern' },
    { id: 'MomentumTracker', name: 'üìà Momentum' },
    { id: 'GapAnalyzer', name: '‚è∞ Gap Analyzer' },
    { id: 'QuantumWalk', name: '‚öõÔ∏è Quantum Walk' },
    { id: 'SwarmIntel', name: 'üêù Swarm Intelligence' },
    { id: 'Gravitational', name: 'üåå Gravitational' },
  ];
  var html = '';
  for (var i = 0; i < algos.length; i++) {
    var a = algos[i];
    var cls = a.id === selectedAlgo ? 'chip on' : 'chip';
    if (a.id === 'auto') cls += ' gold';
    html += '<button class="' + cls + '" data-algo="' + a.id + '">' + a.name + '</button>';
  }
  document.getElementById('algoSelect').innerHTML = html;
}

async function loadStats() {
  try {
    var r = await fetch(API + '/stats/' + selectedLottery);
    var d = await r.json();
    if (!d.success) return;
    var s = d.data;
    document.getElementById('statsGrid').innerHTML =
      '<div class="sc"><div class="sv">' + (s.totalDraws||0) + '</div><div class="sl">' + T[lang].stat_draws + '</div></div>' +
      '<div class="sc"><div class="sv">' + s.numbersCount + '/' + s.maxNumber + '</div><div class="sl">' + T[lang].stat_numbers + '</div></div>' +
      '<div class="sc"><div class="sv">30+</div><div class="sl">' + T[lang].stat_algos + '</div></div>' +
      '<div class="sc"><div class="sv">' + (s.drawDays?s.drawDays.length:1) + 'x</div><div class="sl">' + T[lang].stat_weekly + '</div></div>';
  } catch(e) {}
}

async function generate() {
  var btn = document.getElementById('genBtn');
  btn.disabled = true;
  btn.innerHTML = '<span class="sp"></span> ' + T[lang].generating;

  try {
    var url = API + '/predict/' + selectedLottery + '?tickets=' + ticketCount;
    var r = await fetch(url);
    var d = await r.json();
    if (!d.success) throw new Error('API error');
    renderResults(d.data);
  } catch(e) {
    console.error(e);
    showToast('Error - try again');
  }

  btn.disabled = false;
  btn.innerHTML = T[lang].gen_btn;
}

function renderResults(data) {
  var el = document.getElementById('results');
  var html = '<div class="ri">';
  html += '<span>' + data.lotteryType + '</span>';
  html += '<span>' + data.totalDrawsAnalyzed + ' ' + T[lang].draws_analyzed + '</span>';
  if (data.lastDraw) {
    html += '<span>' + T[lang].last_draw + ': ' + data.lastDraw.numbers.join(', ');
    if (data.lastDraw.additionalNumbers) html += ' + ' + data.lastDraw.additionalNumbers.join(', ');
    html += '</span>';
  }
  html += '</div>';

  for (var i = 0; i < data.tickets.length; i++) {
    var t = data.tickets[i];
    html += '<div class="ticket" style="animation:fadeUp .4s ease ' + (i*0.08) + 's both">';
    html += '<div class="th"><span class="tn">#' + (i+1) + ' ' + T[lang].ticket_lbl + '</span>';
    html += '<span class="ta">' + t.algorithm + '</span></div>';
    html += '<div class="balls">';
    for (var j = 0; j < t.numbers.length; j++) {
      html += '<div class="b" style="animation-delay:' + (j*0.04) + 's">' + t.numbers[j] + '</div>';
    }
    if (t.additionalNumbers && t.additionalNumbers.length) {
      html += '<span class="bsep">+</span>';
      for (var k = 0; k < t.additionalNumbers.length; k++) {
        html += '<div class="b e" style="animation-delay:' + ((t.numbers.length+k)*0.04) + 's">' + t.additionalNumbers[k] + '</div>';
      }
    }
    html += '</div>';
    var conf = Math.round((t.confidence || 0.7) * 100);
    html += '<div class="conf"><span>' + conf + '%</span><div class="cbar"><div class="cfill" style="width:' + conf + '%"></div></div></div>';
    html += '</div>';
  }

  if (data.topNumbers) {
    html += '<div class="top-box"><h4>' + T[lang].top_numbers + '</h4><div class="tnr">';
    var top = data.topNumbers.slice(0, 10);
    for (var m = 0; m < top.length; m++) {
      html += '<span class="tni">' + top[m].number + ' (' + top[m].score.toFixed(1) + ')</span>';
    }
    html += '</div></div>';
  }

  el.innerHTML = html;
}

function showToast(msg) {
  var t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(function(){ t.classList.remove('show'); }, 2000);
}

function copyAddr(text) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(text);
  }
  showToast(T[lang].copied);
}

// === EVENT DELEGATION (no inline onclick) ===
document.addEventListener('click', function(e) {
  var target = e.target;

  // Lottery buttons
  if (target.dataset.lot) {
    selectedLottery = target.dataset.lot;
    renderLotteryButtons();
    document.getElementById('results').innerHTML = '';
    loadStats();
    return;
  }

  // Algo buttons
  if (target.dataset.algo) {
    selectedAlgo = target.dataset.algo;
    renderAlgoButtons();
    return;
  }

  // Ticket count
  if (target.dataset.count) {
    ticketCount = parseInt(target.dataset.count);
    var btns = document.querySelectorAll('#ticketCount .chip');
    for (var i = 0; i < btns.length; i++) {
      btns[i].className = btns[i].dataset.count == ticketCount ? 'chip on' : 'chip';
    }
    return;
  }

  // Generate
  if (target.id === 'genBtn' || target.closest('#genBtn')) {
    generate();
    return;
  }

  // Copy addresses
  if (target.id === 'copyRev' || target.closest('#copyRev')) {
    copyAddr('@szabolt19q');
    return;
  }
  if (target.id === 'copyBtc' || target.closest('#copyBtc')) {
    copyAddr('bc1qeycda4kdd8kupgh9mrxxgardkrkjh82wpurh8c');
    return;
  }

  // Language
  if (target.id === 'btnHu') { setLang('hu'); return; }
  if (target.id === 'btnEn') { setLang('en'); return; }
});

// Init
setLang('hu');
init();
</script>
</body>
</html>
